  [1m[35m (0.4ms)[0m  [1m[34mSELECT GET_LOCK('6242336029525769565', 0)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateClients (20211101181334)
  [1m[35m (12.0ms)[0m  [1m[35mCREATE TABLE `clients` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `number` varchar(255), `name` varchar(255), `email` varchar(255), `phone` varchar(255), `address` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20211101181334')[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateSellers (20211101181344)
  [1m[35m (9.0ms)[0m  [1m[35mCREATE TABLE `sellers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `number` varchar(255), `name` varchar(255), `email` varchar(255), `phone` varchar(255), `address` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20211101181344')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20211101181354)
  [1m[35m (9.0ms)[0m  [1m[35mCREATE TABLE `products` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `description` text, `value` float(24), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20211101181354')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateSales (20211101181405)
  [1m[35m (20.6ms)[0m  [1m[35mCREATE TABLE `sales` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `client_id` bigint NOT NULL, `seller_id` bigint NOT NULL, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL, INDEX `index_sales_on_client_id` (`client_id`), INDEX `index_sales_on_seller_id` (`seller_id`), CONSTRAINT `fk_rails_3fb137af04`
FOREIGN KEY (`client_id`)
  REFERENCES `clients` (`id`)
, CONSTRAINT `fk_rails_965c8091a9`
FOREIGN KEY (`seller_id`)
  REFERENCES `sellers` (`id`)
)[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20211101181405')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductsales (20211101181419)
  [1m[35m (24.4ms)[0m  [1m[35mCREATE TABLE `productsales` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `sale_id` bigint NOT NULL, `product_id` bigint NOT NULL, `value` float(24), `quantity` int, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL, INDEX `index_productsales_on_sale_id` (`sale_id`), INDEX `index_productsales_on_product_id` (`product_id`), CONSTRAINT `fk_rails_5a03933fd4`
FOREIGN KEY (`sale_id`)
  REFERENCES `sales` (`id`)
, CONSTRAINT `fk_rails_6eb30e040a`
FOREIGN KEY (`product_id`)
  REFERENCES `products` (`id`)
)[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20211101181419')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT RELEASE_LOCK('6242336029525769565')[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Started GET "/client/" for ::1 at 2021-11-01 15:22:39 -0300
  [1m[35m (1.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by ClientController#index as */*
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` ORDER BY created_at DESC[0m
  â†³ app/controllers/client_controller.rb:4:in `index'
Completed 200 OK in 58ms (Views: 7.5ms | ActiveRecord: 0.6ms | Allocations: 6082)


Started GET "/client/1" for ::1 at 2021-11-01 15:22:49 -0300
Processing by ClientController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mClient Load (1.4ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/client_controller.rb:8:in `show'
Completed 404 Not Found in 36ms (ActiveRecord: 8.1ms | Allocations: 3076)


  
ActiveRecord::RecordNotFound (Couldn't find Client with 'id'=1):
  
app/controllers/client_controller.rb:8:in `show'
Started POST "/client/?number=00790786567&name=Darlane%20Castro&email=darlanecsc@gmail.com&phone=31-99985-1657&address=Rua%20das%20Industrias,%201177,%20apto%20203" for ::1 at 2021-11-01 15:23:59 -0300
Processing by ClientController#create as */*
  Parameters: {"number"=>"00790786567", "name"=>"Darlane Castro", "email"=>"darlanecsc@gmail.com", "phone"=>"31-99985-1657", "address"=>"Rua das Industrias, 1177, apto 203"}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/client_controller.rb:15:in `create'
  [1m[36mClient Create (0.6ms)[0m  [1m[32mINSERT INTO `clients` (`number`, `name`, `email`, `phone`, `address`, `created_at`, `updated_at`) VALUES ('00790786567', 'Darlane Castro', 'darlanecsc@gmail.com', '31-99985-1657', 'Rua das Industrias, 1177, apto 203', '2021-11-01 18:23:59.527811', '2021-11-01 18:23:59.527811')[0m
  â†³ app/controllers/client_controller.rb:15:in `create'
  [1m[36mTRANSACTION (4.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/client_controller.rb:15:in `create'
Completed 200 OK in 87ms (Views: 3.5ms | ActiveRecord: 5.6ms | Allocations: 6118)


Started POST "/client/?number=02960870417&name=Rodrigo%20Castro&email=rodrigo@gmail.com&phone=31-99368-1841&address=Rua%20das%20Industrias,%201177,%20apto%20203" for ::1 at 2021-11-01 15:25:05 -0300
Processing by ClientController#create as */*
  Parameters: {"number"=>"02960870417", "name"=>"Rodrigo Castro", "email"=>"rodrigo@gmail.com", "phone"=>"31-99368-1841", "address"=>"Rua das Industrias, 1177, apto 203"}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/client_controller.rb:15:in `create'
  [1m[36mClient Create (0.7ms)[0m  [1m[32mINSERT INTO `clients` (`number`, `name`, `email`, `phone`, `address`, `created_at`, `updated_at`) VALUES ('02960870417', 'Rodrigo Castro', 'rodrigo@gmail.com', '31-99368-1841', 'Rua das Industrias, 1177, apto 203', '2021-11-01 18:25:05.124380', '2021-11-01 18:25:05.124380')[0m
  â†³ app/controllers/client_controller.rb:15:in `create'
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/client_controller.rb:15:in `create'
Completed 200 OK in 23ms (Views: 0.7ms | ActiveRecord: 4.5ms | Allocations: 1989)


Started GET "/client/" for ::1 at 2021-11-01 15:25:09 -0300
Processing by ClientController#index as */*
  [1m[36mClient Load (3.2ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` ORDER BY created_at DESC[0m
  â†³ app/controllers/client_controller.rb:4:in `index'
Completed 200 OK in 12ms (Views: 5.8ms | ActiveRecord: 3.2ms | Allocations: 1031)


Started GET "/client/1" for ::1 at 2021-11-01 15:25:16 -0300
Processing by ClientController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/client_controller.rb:8:in `show'
Completed 200 OK in 4ms (Views: 0.5ms | ActiveRecord: 0.5ms | Allocations: 700)


Started GET "/client/2" for ::1 at 2021-11-01 15:25:32 -0300
Processing by ClientController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mClient Load (0.9ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/client_controller.rb:8:in `show'
Completed 200 OK in 7ms (Views: 2.8ms | ActiveRecord: 0.9ms | Allocations: 699)


Started PATCH "/client/1?number=007&name=lane&email=csc&phone=31&address=rua%20" for ::1 at 2021-11-01 15:26:06 -0300
Processing by ClientController#update as */*
  Parameters: {"number"=>"007", "name"=>"lane", "email"=>"csc", "phone"=>"31", "address"=>"rua ", "id"=>"1"}
  [1m[36mClient Load (4.5ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/client_controller.rb:33:in `update'
[31mUnpermitted parameter: :id[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/client_controller.rb:34:in `update'
  [1m[36mClient Update (1.0ms)[0m  [1m[33mUPDATE `clients` SET `clients`.`number` = '007', `clients`.`name` = 'lane', `clients`.`email` = 'csc', `clients`.`phone` = '31', `clients`.`address` = 'rua ', `clients`.`updated_at` = '2021-11-01 18:26:06.426371' WHERE `clients`.`id` = 1[0m
  â†³ app/controllers/client_controller.rb:34:in `update'
  [1m[36mTRANSACTION (4.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/client_controller.rb:34:in `update'
Completed 200 OK in 29ms (Views: 0.7ms | ActiveRecord: 10.7ms | Allocations: 2630)


Started POST "/client/?number=66666&name=Rodrigo%20Castro&email=rodrigo@gmail.com&phone=31-99368-1841&address=Rua%20das%20Industrias,%201177,%20apto%20203" for ::1 at 2021-11-01 15:27:32 -0300
Processing by ClientController#create as */*
  Parameters: {"number"=>"66666", "name"=>"Rodrigo Castro", "email"=>"rodrigo@gmail.com", "phone"=>"31-99368-1841", "address"=>"Rua das Industrias, 1177, apto 203"}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/client_controller.rb:15:in `create'
  [1m[36mClient Create (0.7ms)[0m  [1m[32mINSERT INTO `clients` (`number`, `name`, `email`, `phone`, `address`, `created_at`, `updated_at`) VALUES ('66666', 'Rodrigo Castro', 'rodrigo@gmail.com', '31-99368-1841', 'Rua das Industrias, 1177, apto 203', '2021-11-01 18:27:32.052946', '2021-11-01 18:27:32.052946')[0m
  â†³ app/controllers/client_controller.rb:15:in `create'
  [1m[36mTRANSACTION (4.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/client_controller.rb:15:in `create'
Completed 200 OK in 22ms (Views: 1.2ms | ActiveRecord: 5.5ms | Allocations: 1974)


Started DELETE "/client/3" for ::1 at 2021-11-01 15:27:48 -0300
Processing by ClientController#destroy as */*
  Parameters: {"id"=>"3"}
  [1m[36mClient Load (1.8ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 3 LIMIT 1[0m
  â†³ app/controllers/client_controller.rb:23:in `destroy'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/client_controller.rb:24:in `destroy'
  [1m[36mClient Destroy (3.4ms)[0m  [1m[31mDELETE FROM `clients` WHERE `clients`.`id` = 3[0m
  â†³ app/controllers/client_controller.rb:24:in `destroy'
  [1m[36mTRANSACTION (4.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/client_controller.rb:24:in `destroy'
Completed 200 OK in 28ms (Views: 0.8ms | ActiveRecord: 11.5ms | Allocations: 2110)


Started GET "/seller/" for ::1 at 2021-11-01 15:28:07 -0300
Processing by SellerController#index as */*
  [1m[36mSeller Load (0.6ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` ORDER BY created_at DESC[0m
  â†³ app/controllers/seller_controller.rb:4:in `index'
Completed 200 OK in 7ms (Views: 2.3ms | ActiveRecord: 0.6ms | Allocations: 1614)


Started GET "/seller/1" for ::1 at 2021-11-01 15:28:15 -0300
Processing by SellerController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mSeller Load (0.6ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/seller_controller.rb:8:in `show'
Completed 404 Not Found in 12ms (ActiveRecord: 7.0ms | Allocations: 1259)


  
ActiveRecord::RecordNotFound (Couldn't find Seller with 'id'=1):
  
app/controllers/seller_controller.rb:8:in `show'
Started POST "/seller/?number=1&name=Rodrigo%20Castro&email=rodrigo@gmail.com&phone=31-99368-1841&address=Rua%20das%20Industrias,%201177,%20apto%20203" for ::1 at 2021-11-01 15:28:28 -0300
Processing by SellerController#create as */*
  Parameters: {"number"=>"1", "name"=>"Rodrigo Castro", "email"=>"rodrigo@gmail.com", "phone"=>"31-99368-1841", "address"=>"Rua das Industrias, 1177, apto 203"}
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/seller_controller.rb:15:in `create'
  [1m[36mSeller Create (0.9ms)[0m  [1m[32mINSERT INTO `sellers` (`number`, `name`, `email`, `phone`, `address`, `created_at`, `updated_at`) VALUES ('1', 'Rodrigo Castro', 'rodrigo@gmail.com', '31-99368-1841', 'Rua das Industrias, 1177, apto 203', '2021-11-01 18:28:28.491712', '2021-11-01 18:28:28.491712')[0m
  â†³ app/controllers/seller_controller.rb:15:in `create'
  [1m[36mTRANSACTION (4.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/seller_controller.rb:15:in `create'
Completed 200 OK in 48ms (Views: 1.5ms | ActiveRecord: 6.0ms | Allocations: 5551)


Started POST "/seller/?number=2&name=Rodrigo%20Castro&email=rodrigo@gmail.com&phone=31-99368-1841&address=Rua%20das%20Industrias,%201177,%20apto%20203" for ::1 at 2021-11-01 15:28:34 -0300
Processing by SellerController#create as */*
  Parameters: {"number"=>"2", "name"=>"Rodrigo Castro", "email"=>"rodrigo@gmail.com", "phone"=>"31-99368-1841", "address"=>"Rua das Industrias, 1177, apto 203"}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/seller_controller.rb:15:in `create'
  [1m[36mSeller Create (0.7ms)[0m  [1m[32mINSERT INTO `sellers` (`number`, `name`, `email`, `phone`, `address`, `created_at`, `updated_at`) VALUES ('2', 'Rodrigo Castro', 'rodrigo@gmail.com', '31-99368-1841', 'Rua das Industrias, 1177, apto 203', '2021-11-01 18:28:34.641849', '2021-11-01 18:28:34.641849')[0m
  â†³ app/controllers/seller_controller.rb:15:in `create'
  [1m[36mTRANSACTION (5.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/seller_controller.rb:15:in `create'
Completed 200 OK in 15ms (Views: 0.9ms | ActiveRecord: 6.8ms | Allocations: 1971)


Started POST "/seller/?number=3&name=Rodrigo%20Castro&email=rodrigo@gmail.com&phone=31-99368-1841&address=Rua%20das%20Industrias,%201177,%20apto%20203" for ::1 at 2021-11-01 15:28:38 -0300
Processing by SellerController#create as */*
  Parameters: {"number"=>"3", "name"=>"Rodrigo Castro", "email"=>"rodrigo@gmail.com", "phone"=>"31-99368-1841", "address"=>"Rua das Industrias, 1177, apto 203"}
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/seller_controller.rb:15:in `create'
  [1m[36mSeller Create (2.1ms)[0m  [1m[32mINSERT INTO `sellers` (`number`, `name`, `email`, `phone`, `address`, `created_at`, `updated_at`) VALUES ('3', 'Rodrigo Castro', 'rodrigo@gmail.com', '31-99368-1841', 'Rua das Industrias, 1177, apto 203', '2021-11-01 18:28:38.507092', '2021-11-01 18:28:38.507092')[0m
  â†³ app/controllers/seller_controller.rb:15:in `create'
  [1m[36mTRANSACTION (8.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/seller_controller.rb:15:in `create'
Completed 200 OK in 22ms (Views: 0.7ms | ActiveRecord: 12.6ms | Allocations: 1971)


Started GET "/seller/" for ::1 at 2021-11-01 15:28:41 -0300
Processing by SellerController#index as */*
  [1m[36mSeller Load (0.5ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` ORDER BY created_at DESC[0m
  â†³ app/controllers/seller_controller.rb:4:in `index'
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 0.5ms | Allocations: 1146)


Started GET "/seller/1" for ::1 at 2021-11-01 15:28:46 -0300
Processing by SellerController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mSeller Load (1.0ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/seller_controller.rb:8:in `show'
Completed 200 OK in 5ms (Views: 0.8ms | ActiveRecord: 1.0ms | Allocations: 699)


Started PATCH "/seller/3?number=007&name=lane&email=csc&phone=31&address=rua%20" for ::1 at 2021-11-01 15:29:03 -0300
Processing by SellerController#update as */*
  Parameters: {"number"=>"007", "name"=>"lane", "email"=>"csc", "phone"=>"31", "address"=>"rua ", "id"=>"3"}
  [1m[36mSeller Load (0.8ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 3 LIMIT 1[0m
  â†³ app/controllers/seller_controller.rb:32:in `update'
[31mUnpermitted parameter: :id[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/seller_controller.rb:33:in `update'
  [1m[36mSeller Update (1.1ms)[0m  [1m[33mUPDATE `sellers` SET `sellers`.`number` = '007', `sellers`.`name` = 'lane', `sellers`.`email` = 'csc', `sellers`.`phone` = '31', `sellers`.`address` = 'rua ', `sellers`.`updated_at` = '2021-11-01 18:29:03.084074' WHERE `sellers`.`id` = 3[0m
  â†³ app/controllers/seller_controller.rb:33:in `update'
  [1m[36mTRANSACTION (7.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/seller_controller.rb:33:in `update'
Completed 200 OK in 23ms (Views: 0.7ms | ActiveRecord: 9.2ms | Allocations: 2585)


Started GET "/seller/" for ::1 at 2021-11-01 15:29:07 -0300
Processing by SellerController#index as */*
  [1m[36mSeller Load (1.3ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` ORDER BY created_at DESC[0m
  â†³ app/controllers/seller_controller.rb:4:in `index'
Completed 200 OK in 6ms (Views: 3.6ms | ActiveRecord: 1.3ms | Allocations: 1137)


Started DELETE "/seller/3" for ::1 at 2021-11-01 15:29:17 -0300
Processing by SellerController#destroy as */*
  Parameters: {"id"=>"3"}
  [1m[36mSeller Load (2.1ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 3 LIMIT 1[0m
  â†³ app/controllers/seller_controller.rb:23:in `destroy'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/seller_controller.rb:24:in `destroy'
  [1m[36mSeller Destroy (2.5ms)[0m  [1m[31mDELETE FROM `sellers` WHERE `sellers`.`id` = 3[0m
  â†³ app/controllers/seller_controller.rb:24:in `destroy'
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/seller_controller.rb:24:in `destroy'
Completed 200 OK in 19ms (Views: 1.3ms | ActiveRecord: 7.4ms | Allocations: 2090)


Started GET "/product/" for ::1 at 2021-11-01 15:29:31 -0300
Processing by ProductController#index as */*
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT `products`.* FROM `products` ORDER BY created_at DESC[0m
  â†³ app/controllers/product_controller.rb:4:in `index'
Completed 200 OK in 10ms (Views: 2.3ms | ActiveRecord: 0.9ms | Allocations: 1694)


Started GET "/product/1" for ::1 at 2021-11-01 15:29:38 -0300
Processing by ProductController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/product_controller.rb:8:in `show'
Completed 404 Not Found in 12ms (ActiveRecord: 6.5ms | Allocations: 1221)


  
ActiveRecord::RecordNotFound (Couldn't find Product with 'id'=1):
  
app/controllers/product_controller.rb:8:in `show'
Started POST "/product/?name=name%20produto%201&description=desc%20produto%201&value=17,50" for ::1 at 2021-11-01 15:31:20 -0300
Processing by ProductController#create as */*
  Parameters: {"name"=>"name produto 1", "description"=>"desc produto 1", "value"=>"17,50"}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/product_controller.rb:15:in `create'
  [1m[36mProduct Create (0.6ms)[0m  [1m[32mINSERT INTO `products` (`name`, `description`, `value`, `created_at`, `updated_at`) VALUES ('name produto 1', 'desc produto 1', 17.0, '2021-11-01 18:31:20.211725', '2021-11-01 18:31:20.211725')[0m
  â†³ app/controllers/product_controller.rb:15:in `create'
  [1m[36mTRANSACTION (7.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/product_controller.rb:15:in `create'
Completed 200 OK in 20ms (Views: 0.8ms | ActiveRecord: 7.8ms | Allocations: 4694)


Started POST "/product/?name=name%20produto%202&description=desc%20produto%202&value=35" for ::1 at 2021-11-01 15:31:32 -0300
Processing by ProductController#create as */*
  Parameters: {"name"=>"name produto 2", "description"=>"desc produto 2", "value"=>"35"}
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/product_controller.rb:15:in `create'
  [1m[36mProduct Create (1.9ms)[0m  [1m[32mINSERT INTO `products` (`name`, `description`, `value`, `created_at`, `updated_at`) VALUES ('name produto 2', 'desc produto 2', 35.0, '2021-11-01 18:31:32.525609', '2021-11-01 18:31:32.525609')[0m
  â†³ app/controllers/product_controller.rb:15:in `create'
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/product_controller.rb:15:in `create'
Completed 200 OK in 15ms (Views: 0.7ms | ActiveRecord: 6.0ms | Allocations: 1911)


Started POST "/product/?name=name%20produto%203&description=desc%20produto%203&value=89" for ::1 at 2021-11-01 15:31:41 -0300
Processing by ProductController#create as */*
  Parameters: {"name"=>"name produto 3", "description"=>"desc produto 3", "value"=>"89"}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/product_controller.rb:15:in `create'
  [1m[36mProduct Create (0.6ms)[0m  [1m[32mINSERT INTO `products` (`name`, `description`, `value`, `created_at`, `updated_at`) VALUES ('name produto 3', 'desc produto 3', 89.0, '2021-11-01 18:31:41.408553', '2021-11-01 18:31:41.408553')[0m
  â†³ app/controllers/product_controller.rb:15:in `create'
  [1m[36mTRANSACTION (4.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/product_controller.rb:15:in `create'
Completed 200 OK in 13ms (Views: 0.7ms | ActiveRecord: 5.4ms | Allocations: 1911)


Started PATCH "/product/3?name=prod%20alt%203&description=prod%20desc%20alt%203&value=389" for ::1 at 2021-11-01 15:32:43 -0300
Processing by ProductController#update as */*
  Parameters: {"name"=>"prod alt 3", "description"=>"prod desc alt 3", "value"=>"389", "id"=>"3"}
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 3 LIMIT 1[0m
  â†³ app/controllers/product_controller.rb:32:in `update'
[31mUnpermitted parameter: :id[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/product_controller.rb:33:in `update'
  [1m[36mProduct Update (2.2ms)[0m  [1m[33mUPDATE `products` SET `products`.`name` = 'prod alt 3', `products`.`description` = 'prod desc alt 3', `products`.`value` = 389.0, `products`.`updated_at` = '2021-11-01 18:32:43.643994' WHERE `products`.`id` = 3[0m
  â†³ app/controllers/product_controller.rb:33:in `update'
  [1m[36mTRANSACTION (10.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/product_controller.rb:33:in `update'
Completed 200 OK in 29ms (Views: 1.2ms | ActiveRecord: 15.1ms | Allocations: 2521)


Started POST "/product/?name=name%20produto%204&description=desc%20produto%204&value=17.5" for ::1 at 2021-11-01 15:33:21 -0300
Processing by ProductController#create as */*
  Parameters: {"name"=>"name produto 4", "description"=>"desc produto 4", "value"=>"17.5"}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/product_controller.rb:15:in `create'
  [1m[36mProduct Create (0.6ms)[0m  [1m[32mINSERT INTO `products` (`name`, `description`, `value`, `created_at`, `updated_at`) VALUES ('name produto 4', 'desc produto 4', 17.5, '2021-11-01 18:33:21.031680', '2021-11-01 18:33:21.031680')[0m
  â†³ app/controllers/product_controller.rb:15:in `create'
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/product_controller.rb:15:in `create'
Completed 200 OK in 12ms (Views: 0.6ms | ActiveRecord: 4.1ms | Allocations: 1911)


Started DELETE "/product/3" for ::1 at 2021-11-01 15:33:47 -0300
Processing by ProductController#destroy as */*
  Parameters: {"id"=>"3"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 3 LIMIT 1[0m
  â†³ app/controllers/product_controller.rb:23:in `destroy'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/product_controller.rb:24:in `destroy'
  [1m[36mProduct Destroy (1.2ms)[0m  [1m[31mDELETE FROM `products` WHERE `products`.`id` = 3[0m
  â†³ app/controllers/product_controller.rb:24:in `destroy'
  [1m[36mTRANSACTION (4.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/product_controller.rb:24:in `destroy'
Completed 200 OK in 19ms (Views: 0.7ms | ActiveRecord: 7.8ms | Allocations: 2056)


Started GET "/sale/" for ::1 at 2021-11-01 15:34:06 -0300
Processing by SaleController#index as */*
  [1m[36mSale Load (0.7ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` ORDER BY created_at DESC[0m
  â†³ app/controllers/sale_controller.rb:4:in `index'
Completed 200 OK in 18ms (Views: 2.7ms | ActiveRecord: 0.7ms | Allocations: 2660)


Started GET "/sale/1" for ::1 at 2021-11-01 15:34:12 -0300
Processing by SaleController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mSale Load (0.8ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:8:in `show'
Completed 404 Not Found in 16ms (ActiveRecord: 7.8ms | Allocations: 1065)


  
ActiveRecord::RecordNotFound (Couldn't find Sale with 'id'=1):
  
app/controllers/sale_controller.rb:8:in `show'
Started GET "/client/" for ::1 at 2021-11-01 15:49:46 -0300
Processing by ClientController#index as */*
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` ORDER BY created_at DESC[0m
  â†³ app/controllers/client_controller.rb:4:in `index'
Completed 200 OK in 6ms (Views: 3.4ms | ActiveRecord: 1.1ms | Allocations: 1121)


Started GET "/product/" for ::1 at 2021-11-01 15:52:30 -0300
Processing by ProductController#index as */*
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT `products`.* FROM `products` ORDER BY created_at DESC[0m
  â†³ app/controllers/product_controller.rb:4:in `index'
Completed 200 OK in 6ms (Views: 3.5ms | ActiveRecord: 0.8ms | Allocations: 1037)


Started POST "/sale/" for ::1 at 2021-11-01 15:55:41 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "product"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.0ms | Allocations: 1573)


  
NameError (undefined local variable or method `sale_params' for #<SaleController:0x007fa409cfe040>
Did you mean?  sale_path):
  
app/controllers/sale_controller.rb:13:in `create'
Started POST "/sale/" for ::1 at 2021-11-01 15:58:25 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "product"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :product, :sale[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:16:in `create'
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:16:in `create'
  [1m[36mSeller Load (0.9ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:16:in `create'
  [1m[36mSale Create (1.0ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 18:58:25.647712', '2021-11-01 18:58:25.647712')[0m
  â†³ app/controllers/sale_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:16:in `create'
Completed 200 OK in 121ms (Views: 0.7ms | ActiveRecord: 19.5ms | Allocations: 19347)


Started POST "/sale/" for ::1 at 2021-11-01 16:17:56 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mClient Load (0.9ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSeller Load (0.7ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSale Create (0.8ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 19:17:56.650742', '2021-11-01 19:17:56.650742')[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mTRANSACTION (10.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:15:in `create'
Completed 500 Internal Server Error in 131ms (ActiveRecord: 14.0ms | Allocations: 18137)


  
NoMethodError (undefined method `rollback' for #<Class:0x00007fa409e2b328>):
  
app/controllers/sale_controller.rb:30:in `rescue in create'
app/controllers/sale_controller.rb:28:in `create'
Started POST "/sale/" for ::1 at 2021-11-01 16:20:36 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:16:in `block in create'
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSeller Load (4.7ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSale Create (3.1ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 19:20:36.461121', '2021-11-01 19:20:36.461121')[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:15:in `create'
Completed 500 Internal Server Error in 75ms (ActiveRecord: 26.5ms | Allocations: 16392)


  
ActiveRecord::Rollback (#<NoMethodError: undefined method `sale_id=' for #<ActionController::Parameters:0x00007fa409c903d8>>):
  
app/controllers/sale_controller.rb:29:in `rescue in create'
app/controllers/sale_controller.rb:27:in `create'
Started POST "/sale/" for ::1 at 2021-11-01 16:21:21 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:16:in `block in create'
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSeller Load (0.5ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSale Create (0.7ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 19:21:21.715012', '2021-11-01 19:21:21.715012')[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:15:in `create'
Completed 500 Internal Server Error in 94ms (ActiveRecord: 22.9ms | Allocations: 20343)


  
ActiveRecord::Rollback (#<ActiveModel::ForbiddenAttributesError: ActiveModel::ForbiddenAttributesError>):
  
app/controllers/sale_controller.rb:29:in `rescue in create'
app/controllers/sale_controller.rb:27:in `create'
Started POST "/sale/" for ::1 at 2021-11-01 16:25:46 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:16:in `block in create'
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSeller Load (0.8ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSale Create (0.8ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 19:25:46.243974', '2021-11-01 19:25:46.243974')[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:15:in `create'
Completed 500 Internal Server Error in 97ms (ActiveRecord: 21.9ms | Allocations: 20038)


  
ActiveRecord::Rollback (#<ActiveModel::ForbiddenAttributesError: ActiveModel::ForbiddenAttributesError>):
  
app/controllers/sale_controller.rb:29:in `rescue in create'
app/controllers/sale_controller.rb:27:in `create'
Started POST "/sale/" for ::1 at 2021-11-01 16:27:09 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:16:in `block in create'
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSeller Load (0.4ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSale Create (0.5ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 19:27:09.445329', '2021-11-01 19:27:09.445329')[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mTRANSACTION (3.9ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:15:in `create'
Completed 500 Internal Server Error in 155ms (ActiveRecord: 29.1ms | Allocations: 20091)


  
ActiveRecord::Rollback (#<ActiveModel::ForbiddenAttributesError: ActiveModel::ForbiddenAttributesError>):
  
app/controllers/sale_controller.rb:32:in `rescue in create'
app/controllers/sale_controller.rb:30:in `create'
Started POST "/sale/" for ::1 at 2021-11-01 16:30:58 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:16:in `block in create'
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSeller Load (0.5ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSale Create (0.5ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 19:30:58.912836', '2021-11-01 19:30:58.912836')[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:15:in `create'
Completed 500 Internal Server Error in 102ms (ActiveRecord: 22.0ms | Allocations: 20130)


  
ActiveRecord::Rollback (#<ActiveModel::ForbiddenAttributesError: ActiveModel::ForbiddenAttributesError>):
  
app/controllers/sale_controller.rb:32:in `rescue in create'
app/controllers/sale_controller.rb:30:in `create'
Started POST "/sale/" for ::1 at 2021-11-01 16:34:28 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:16:in `block in create'
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSeller Load (0.5ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSale Create (0.6ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 19:34:28.785384', '2021-11-01 19:34:28.785384')[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:15:in `create'
Completed 500 Internal Server Error in 94ms (ActiveRecord: 21.7ms | Allocations: 17454)


  
ActiveRecord::Rollback (#<NameError: undefined local variable or method `productsale' for #<SaleController:0x007fa40aa86870>
Did you mean?  product>):
  
app/controllers/sale_controller.rb:35:in `rescue in create'
app/controllers/sale_controller.rb:33:in `create'
Started POST "/sale/" for ::1 at 2021-11-01 16:35:45 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:16:in `block in create'
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSeller Load (0.5ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSale Create (1.5ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 19:35:45.663971', '2021-11-01 19:35:45.663971')[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:15:in `create'
Completed 500 Internal Server Error in 85ms (ActiveRecord: 25.0ms | Allocations: 20098)


  
ActiveRecord::Rollback (#<ActiveModel::ForbiddenAttributesError: ActiveModel::ForbiddenAttributesError>):
  
app/controllers/sale_controller.rb:36:in `rescue in create'
app/controllers/sale_controller.rb:34:in `create'
Started POST "/sale/" for ::1 at 2021-11-01 16:37:00 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:16:in `block in create'
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSeller Load (2.5ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSale Create (2.3ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 19:37:00.660448', '2021-11-01 19:37:00.660448')[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:15:in `create'
Completed 500 Internal Server Error in 91ms (ActiveRecord: 28.3ms | Allocations: 15841)


  
ActiveRecord::Rollback (#<TypeError: no implicit conversion of Symbol into Integer>):
  
app/controllers/sale_controller.rb:36:in `rescue in create'
app/controllers/sale_controller.rb:34:in `create'
Started POST "/sale/" for ::1 at 2021-11-01 16:40:56 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:16:in `block in create'
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSeller Load (0.5ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSale Create (0.7ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 19:40:56.488740', '2021-11-01 19:40:56.488740')[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:15:in `create'
Completed 500 Internal Server Error in 91ms (ActiveRecord: 24.6ms | Allocations: 20087)


  
ActiveRecord::Rollback (#<ActiveModel::ForbiddenAttributesError: ActiveModel::ForbiddenAttributesError>):
  
app/controllers/sale_controller.rb:32:in `rescue in create'
app/controllers/sale_controller.rb:30:in `create'
Started POST "/sale/" for ::1 at 2021-11-01 16:43:34 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:16:in `block in create'
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSeller Load (0.6ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSale Create (1.0ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 19:43:35.134812', '2021-11-01 19:43:35.134812')[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:15:in `create'
Completed 500 Internal Server Error in 85ms (ActiveRecord: 22.8ms | Allocations: 20034)


  
ActiveRecord::Rollback (#<ActiveModel::ForbiddenAttributesError: ActiveModel::ForbiddenAttributesError>):
  
app/controllers/sale_controller.rb:32:in `rescue in create'
app/controllers/sale_controller.rb:30:in `create'
Started POST "/sale/" for ::1 at 2021-11-01 16:44:17 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:16:in `block in create'
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSeller Load (2.5ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSale Create (3.2ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 19:44:17.704745', '2021-11-01 19:44:17.704745')[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:15:in `create'
Completed 500 Internal Server Error in 115ms (ActiveRecord: 28.5ms | Allocations: 20086)


  
ActiveRecord::Rollback (#<ActiveModel::ForbiddenAttributesError: ActiveModel::ForbiddenAttributesError>):
  
app/controllers/sale_controller.rb:33:in `rescue in create'
app/controllers/sale_controller.rb:30:in `create'
Started POST "/sale/" for ::1 at 2021-11-01 16:47:44 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:16:in `block in create'
  [1m[36mClient Load (0.8ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSeller Load (0.6ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSale Create (0.6ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 19:47:44.588305', '2021-11-01 19:47:44.588305')[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:15:in `create'
Completed 500 Internal Server Error in 94ms (ActiveRecord: 21.4ms | Allocations: 20042)


  
ActiveRecord::Rollback (#<ActiveModel::ForbiddenAttributesError: ActiveModel::ForbiddenAttributesError>):
  
app/controllers/sale_controller.rb:33:in `rescue in create'
app/controllers/sale_controller.rb:30:in `create'
Started POST "/sale/" for ::1 at 2021-11-01 16:52:28 -0300
  
SyntaxError (/Users/rodrigocastro/Meu Drive/16 - Programacao/Rails/SalesSystem/app/controllers/sale_controller.rb:73: syntax error, unexpected end, expecting end-of-input):
  
app/controllers/sale_controller.rb:73: syntax error, unexpected end, expecting end-of-input
app/controllers/sale_controller.rb:73: syntax error, unexpected end, expecting end-of-input
Started POST "/sale/" for ::1 at 2021-11-01 16:52:47 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mClient Load (1.5ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mSeller Load (0.9ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mSale Create (16.8ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 19:52:47.599736', '2021-11-01 19:52:47.599736')[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
Completed 422 Unprocessable Entity in 157ms (Views: 3.6ms | ActiveRecord: 40.3ms | Allocations: 22100)


Started POST "/sale/" for ::1 at 2021-11-01 16:53:59 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mSeller Load (0.5ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mSale Create (0.5ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 19:53:59.236159', '2021-11-01 19:53:59.236159')[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
Completed 422 Unprocessable Entity in 79ms (Views: 0.3ms | ActiveRecord: 24.9ms | Allocations: 20473)


Started POST "/sale/" for ::1 at 2021-11-01 16:54:49 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mClient Load (0.7ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mSeller Load (0.4ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mSale Create (0.6ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 19:54:49.493141', '2021-11-01 19:54:49.493141')[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
Completed 422 Unprocessable Entity in 87ms (Views: 0.6ms | ActiveRecord: 21.7ms | Allocations: 20423)


Started POST "/sale/" for ::1 at 2021-11-01 16:55:29 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mClient Load (1.0ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mSeller Load (0.4ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mSale Create (0.6ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 19:55:30.079027', '2021-11-01 19:55:30.079027')[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
Completed 422 Unprocessable Entity in 96ms (Views: 0.5ms | ActiveRecord: 22.8ms | Allocations: 20447)


Started GET "/product/1" for ::1 at 2021-11-01 16:56:33 -0300
Processing by ProductController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/product_controller.rb:8:in `show'
Completed 200 OK in 22ms (Views: 1.1ms | ActiveRecord: 4.7ms | Allocations: 4747)


Started GET "/product/1" for ::1 at 2021-11-01 16:57:21 -0300
Processing by ProductController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/product_controller.rb:8:in `show'
Completed 200 OK in 28ms (Views: 0.6ms | ActiveRecord: 5.3ms | Allocations: 4872)


Started POST "/sale/" for ::1 at 2021-11-01 16:57:25 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mClient Load (1.7ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mSeller Load (0.5ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mSale Create (2.5ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 19:57:25.751123', '2021-11-01 19:57:25.751123')[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
Completed 422 Unprocessable Entity in 84ms (Views: 0.3ms | ActiveRecord: 23.4ms | Allocations: 20390)


Started POST "/sale/" for ::1 at 2021-11-01 16:59:00 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mSeller Load (0.5ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mSale Create (3.6ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 19:59:00.267499', '2021-11-01 19:59:00.267499')[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
Completed 422 Unprocessable Entity in 109ms (Views: 0.6ms | ActiveRecord: 26.1ms | Allocations: 20449)


Started POST "/sale/" for ::1 at 2021-11-01 17:00:39 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mSeller Load (0.6ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mSale Create (0.6ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 20:00:39.605233', '2021-11-01 20:00:39.605233')[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
Completed 422 Unprocessable Entity in 86ms (Views: 0.3ms | ActiveRecord: 23.4ms | Allocations: 20410)


Started POST "/sale/" for ::1 at 2021-11-01 17:01:31 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mClient Load (1.2ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mSeller Load (0.4ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mSale Create (0.6ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 20:01:31.763442', '2021-11-01 20:01:31.763442')[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
Completed 200 OK in 113ms (Views: 0.9ms | ActiveRecord: 24.0ms | Allocations: 20495)


Started POST "/sale/" for ::1 at 2021-11-01 17:03:13 -0300
  
SyntaxError (/Users/rodrigocastro/Meu Drive/16 - Programacao/Rails/SalesSystem/app/controllers/sale_controller.rb:74: syntax error, unexpected end-of-input, expecting end):
  
app/controllers/sale_controller.rb:74: syntax error, unexpected end-of-input, expecting end
app/controllers/sale_controller.rb:74: syntax error, unexpected end-of-input, expecting end
Started POST "/sale/" for ::1 at 2021-11-01 17:03:33 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:16:in `block in create'
  [1m[36mClient Load (0.8ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSeller Load (0.5ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mSale Create (0.6ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 20:03:33.756987', '2021-11-01 20:03:33.756987')[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mTRANSACTION (4.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:15:in `create'
Completed 500 Internal Server Error in 107ms (ActiveRecord: 31.9ms | Allocations: 21583)


  
NameError (undefined local variable or method `sale' for #<SaleController:0x007fa40b336808>
Did you mean?  stale?):
  
app/controllers/sale_controller.rb:44:in `create'
Started POST "/sale/" for ::1 at 2021-11-01 17:11:17 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mClient Load (1.7ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mSeller Load (0.6ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mSale Create (0.6ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 20:11:17.664393', '2021-11-01 20:11:17.664393')[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
Completed 200 OK in 78ms (Views: 0.7ms | ActiveRecord: 4.8ms | Allocations: 19499)


Started GET "/product/1" for ::1 at 2021-11-01 17:16:07 -0300
Processing by ProductController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/product_controller.rb:8:in `show'
Completed 200 OK in 27ms (Views: 0.5ms | ActiveRecord: 6.6ms | Allocations: 4924)


Started POST "/sale/" for ::1 at 2021-11-01 17:16:40 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:18:in `create'
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:18:in `create'
  [1m[36mSeller Load (0.5ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:18:in `create'
  [1m[36mSale Create (0.5ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 20:16:40.221789', '2021-11-01 20:16:40.221789')[0m
  â†³ app/controllers/sale_controller.rb:18:in `create'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:18:in `create'
Completed 422 Unprocessable Entity in 109ms (Views: 0.5ms | ActiveRecord: 26.4ms | Allocations: 21872)


Started POST "/sale/" for ::1 at 2021-11-01 17:19:30 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:18:in `create'
  [1m[36mClient Load (1.5ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:18:in `create'
  [1m[36mSeller Load (0.5ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:18:in `create'
  [1m[36mSale Create (0.8ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 20:19:30.792665', '2021-11-01 20:19:30.792665')[0m
  â†³ app/controllers/sale_controller.rb:18:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:18:in `create'
Completed 422 Unprocessable Entity in 100ms (Views: 0.6ms | ActiveRecord: 26.7ms | Allocations: 21825)


Started POST "/sale/" for ::1 at 2021-11-01 17:21:20 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:18:in `create'
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:18:in `create'
  [1m[36mSeller Load (1.0ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:18:in `create'
  [1m[36mSale Create (1.8ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 20:21:20.655994', '2021-11-01 20:21:20.655994')[0m
  â†³ app/controllers/sale_controller.rb:18:in `create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:18:in `create'
Completed 200 OK in 98ms (Views: 0.5ms | ActiveRecord: 26.2ms | Allocations: 20424)


Started POST "/sale/" for ::1 at 2021-11-01 17:25:13 -0300
  
SyntaxError (/Users/rodrigocastro/Meu Drive/16 - Programacao/Rails/SalesSystem/app/controllers/sale_controller.rb:33: syntax error, unexpected ':', expecting tSTRING_DEND
puts "sale=#{json: {data:sale}}"
                 ^
/Users/rodrigocastro/Meu Drive/16 - Programacao/Rails/SalesSystem/app/controllers/sale_controller.rb:34: syntax error, unexpected ':', expecting tSTRING_DEND
puts "productsale=#{json: {data:newArrPrd}}"
                        ^):
  
app/controllers/sale_controller.rb:33: syntax error, unexpected ':', expecting tSTRING_DEND
app/controllers/sale_controller.rb:34: syntax error, unexpected ':', expecting tSTRING_DEND
app/controllers/sale_controller.rb:33: syntax error, unexpected ':', expecting tSTRING_DEND
app/controllers/sale_controller.rb:34: syntax error, unexpected ':', expecting tSTRING_DEND
Started POST "/sale/" for ::1 at 2021-11-01 17:26:35 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:18:in `create'
  [1m[36mClient Load (1.3ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:18:in `create'
  [1m[36mSeller Load (0.7ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:18:in `create'
  [1m[36mSale Create (0.8ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 20:26:35.559352', '2021-11-01 20:26:35.559352')[0m
  â†³ app/controllers/sale_controller.rb:18:in `create'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:18:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:29:in `block in create'
  [1m[36mSale Load (0.6ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 28 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:29:in `block in create'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:29:in `block in create'
  [1m[36mProductsale Create (0.7ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (28, 1, 10.0, 2, '2021-11-01 20:26:35.631718', '2021-11-01 20:26:35.631718')[0m
  â†³ app/controllers/sale_controller.rb:29:in `block in create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:29:in `block in create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:29:in `block in create'
  [1m[36mSale Load (0.6ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 28 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:29:in `block in create'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:29:in `block in create'
  [1m[36mProductsale Create (0.9ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (28, 2, 20.0, 2, '2021-11-01 20:26:35.650640', '2021-11-01 20:26:35.650640')[0m
  â†³ app/controllers/sale_controller.rb:29:in `block in create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:29:in `block in create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:29:in `block in create'
  [1m[36mSale Load (0.6ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 28 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:29:in `block in create'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:29:in `block in create'
  [1m[36mProductsale Create (0.5ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (28, 4, 30.0, 2, '2021-11-01 20:26:35.672904', '2021-11-01 20:26:35.672904')[0m
  â†³ app/controllers/sale_controller.rb:29:in `block in create'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:29:in `block in create'
Completed 200 OK in 202ms (Views: 0.9ms | ActiveRecord: 40.5ms | Allocations: 34788)


Started GET "/product/" for ::1 at 2021-11-01 17:37:13 -0300
Processing by ProductController#index as */*
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT `products`.* FROM `products` ORDER BY created_at DESC[0m
  â†³ app/controllers/product_controller.rb:4:in `index'
Completed 200 OK in 17ms (Views: 9.7ms | ActiveRecord: 0.9ms | Allocations: 5710)


Started POST "/sale/" for ::1 at 2021-11-01 17:37:15 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mClient Load (3.0ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mSeller Load (3.2ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mSale Create (1.3ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 20:37:16.060448', '2021-11-01 20:37:16.060448')[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mTRANSACTION (4.0ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:16:in `create'
Completed 500 Internal Server Error in 120ms (ActiveRecord: 13.0ms | Allocations: 16653)


  
ActiveRecord::Rollback (#<NoMethodError: undefined method `productsale' for #<Sale:0x00007fa40f275780>
Did you mean?  productsales
               productsales=>):
  
app/controllers/sale_controller.rb:41:in `rescue in create'
app/controllers/sale_controller.rb:38:in `create'
Started POST "/sale/" for ::1 at 2021-11-01 17:37:39 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mSeller Load (1.4ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mSale Create (0.5ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 20:37:40.054890', '2021-11-01 20:37:40.054890')[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:16:in `create'
Completed 500 Internal Server Error in 104ms (ActiveRecord: 20.8ms | Allocations: 22381)


  
ActiveRecord::Rollback (#<ActiveModel::ForbiddenAttributesError: ActiveModel::ForbiddenAttributesError>):
  
app/controllers/sale_controller.rb:41:in `rescue in create'
app/controllers/sale_controller.rb:38:in `create'
Started POST "/sale/" for ::1 at 2021-11-01 17:39:28 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mClient Load (0.8ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mSeller Load (0.7ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mSale Create (0.5ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 20:39:29.037818', '2021-11-01 20:39:29.037818')[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mTRANSACTION (4.0ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:16:in `create'
Completed 500 Internal Server Error in 109ms (ActiveRecord: 21.4ms | Allocations: 20137)


  
ActiveRecord::Rollback (#<ActiveModel::ForbiddenAttributesError: ActiveModel::ForbiddenAttributesError>):
  
app/controllers/sale_controller.rb:42:in `rescue in create'
app/controllers/sale_controller.rb:39:in `create'
Started POST "/sale/" for ::1 at 2021-11-01 17:40:00 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mClient Load (0.7ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mSeller Load (0.5ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mSale Create (0.6ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 20:40:00.401894', '2021-11-01 20:40:00.401894')[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:16:in `create'
Completed 500 Internal Server Error in 87ms (ActiveRecord: 24.1ms | Allocations: 20139)


  
ActiveRecord::Rollback (#<ActiveModel::ForbiddenAttributesError: ActiveModel::ForbiddenAttributesError>):
  
app/controllers/sale_controller.rb:42:in `rescue in create'
app/controllers/sale_controller.rb:39:in `create'
Started POST "/sale/" for ::1 at 2021-11-01 17:41:06 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mSeller Load (0.5ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mSale Create (0.7ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 20:41:06.599988', '2021-11-01 20:41:06.599988')[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mSale Load (0.7ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 33 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:29:in `block (2 levels) in create'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:29:in `block (2 levels) in create'
  [1m[36mProductsale Create (0.7ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (33, 1, 10.0, 2, '2021-11-01 20:41:06.645684', '2021-11-01 20:41:06.645684')[0m
  â†³ app/controllers/sale_controller.rb:29:in `block (2 levels) in create'
  [1m[36mSale Load (0.6ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 33 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:29:in `block (2 levels) in create'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:29:in `block (2 levels) in create'
  [1m[36mProductsale Create (0.6ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (33, 2, 20.0, 2, '2021-11-01 20:41:06.657385', '2021-11-01 20:41:06.657385')[0m
  â†³ app/controllers/sale_controller.rb:29:in `block (2 levels) in create'
  [1m[36mSale Load (0.5ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 33 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:29:in `block (2 levels) in create'
  [1m[36mProduct Load (5.5ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:29:in `block (2 levels) in create'
  [1m[36mProductsale Create (0.7ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (33, 4, 30.0, 2, '2021-11-01 20:41:06.672652', '2021-11-01 20:41:06.672652')[0m
  â†³ app/controllers/sale_controller.rb:29:in `block (2 levels) in create'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:16:in `create'
Completed 500 Internal Server Error in 143ms (ActiveRecord: 37.1ms | Allocations: 32357)


  
NameError (undefined local variable or method `sale' for #<SaleController:0x007fa40765b640>
Did you mean?  stale?):
  
app/controllers/sale_controller.rb:45:in `create'
Started POST "/sale/" for ::1 at 2021-11-01 17:43:05 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:17:in `block in create'
  [1m[36mClient Load (0.4ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mSeller Load (0.4ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mSale Create (0.6ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 20:43:05.660861', '2021-11-01 20:43:05.660861')[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mSale Load (0.5ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 34 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:29:in `block (2 levels) in create'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:29:in `block (2 levels) in create'
  [1m[36mProductsale Create (0.6ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (34, 1, 10.0, 2, '2021-11-01 20:43:05.706600', '2021-11-01 20:43:05.706600')[0m
  â†³ app/controllers/sale_controller.rb:29:in `block (2 levels) in create'
  [1m[36mSale Load (0.4ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 34 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:29:in `block (2 levels) in create'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:29:in `block (2 levels) in create'
  [1m[36mProductsale Create (0.5ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (34, 2, 20.0, 2, '2021-11-01 20:43:05.716081', '2021-11-01 20:43:05.716081')[0m
  â†³ app/controllers/sale_controller.rb:29:in `block (2 levels) in create'
  [1m[36mSale Load (0.7ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 34 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:29:in `block (2 levels) in create'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:29:in `block (2 levels) in create'
  [1m[36mProductsale Create (0.6ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (34, 4, 30.0, 2, '2021-11-01 20:43:05.728925', '2021-11-01 20:43:05.728925')[0m
  â†³ app/controllers/sale_controller.rb:29:in `block (2 levels) in create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:16:in `create'
Completed 500 Internal Server Error in 140ms (ActiveRecord: 27.1ms | Allocations: 32357)


  
NameError (undefined local variable or method `sale' for #<SaleController:0x007fa4108863f8>
Did you mean?  stale?):
  
app/controllers/sale_controller.rb:48:in `create'
Started POST "/sale/" for ::1 at 2021-11-01 17:45:21 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "products"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :products, :sale[0m
  [1m[36mTRANSACTION (18.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mClient Load (0.8ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mSeller Load (0.5ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mSale Create (0.5ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-01 20:45:21.387162', '2021-11-01 20:45:21.387162')[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mSale Load (0.6ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 35 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mProductsale Create (0.6ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (35, 1, 10.0, 2, '2021-11-01 20:45:21.436750', '2021-11-01 20:45:21.436750')[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mSale Load (1.8ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 35 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mProductsale Create (0.5ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (35, 2, 20.0, 2, '2021-11-01 20:45:21.454150', '2021-11-01 20:45:21.454150')[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mSale Load (1.9ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 35 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mProductsale Create (0.8ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (35, 4, 30.0, 2, '2021-11-01 20:45:21.478549', '2021-11-01 20:45:21.478549')[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
Completed 200 OK in 183ms (Views: 0.6ms | ActiveRecord: 50.6ms | Allocations: 30900)


Started GET "/cliente/" for ::1 at 2021-11-01 18:14:09 -0300
  
ActionController::RoutingError (No route matches [GET] "/cliente"):
  
Started GET "/client/" for ::1 at 2021-11-01 18:14:33 -0300
Processing by ClientController#index as */*
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` ORDER BY created_at DESC[0m
  â†³ app/controllers/client_controller.rb:4:in `index'
Completed 200 OK in 29ms (Views: 19.9ms | ActiveRecord: 1.0ms | Allocations: 6501)


Started GET "/sale/" for ::1 at 2021-11-02 09:27:16 -0300
  [1m[35m (9.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SaleController#index as */*
  [1m[36mSale Load (6.3ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` ORDER BY created_at DESC[0m
  â†³ app/controllers/sale_controller.rb:4:in `index'
Completed 200 OK in 66ms (Views: 19.5ms | ActiveRecord: 12.7ms | Allocations: 8334)


Started POST "/sale/" for ::1 at 2021-11-02 09:34:57 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"2", "seller_id"=>"2", "product"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"2", "seller_id"=>"2"}}
[31mUnpermitted parameters: :product, :sale[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mSeller Load (3.4ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mSale Create (2.0ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (2, 2, '2021-11-02 12:34:57.780106', '2021-11-02 12:34:57.780106')[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
Completed 500 Internal Server Error in 89ms (ActiveRecord: 17.5ms | Allocations: 18379)


  
ActiveRecord::Rollback (#<NoMethodError: undefined method `each' for nil:NilClass>):
  
app/controllers/sale_controller.rb:40:in `rescue in create'
app/controllers/sale_controller.rb:37:in `create'
Started POST "/sale/" for ::1 at 2021-11-02 09:35:19 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "product"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :product, :sale[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mSeller Load (1.8ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mSale Create (0.8ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-02 12:35:19.111543', '2021-11-02 12:35:19.111543')[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
Completed 500 Internal Server Error in 43ms (ActiveRecord: 5.5ms | Allocations: 3840)


  
ActiveRecord::Rollback (#<NoMethodError: undefined method `each' for nil:NilClass>):
  
app/controllers/sale_controller.rb:40:in `rescue in create'
app/controllers/sale_controller.rb:37:in `create'
Started POST "/sale/" for ::1 at 2021-11-02 09:38:52 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "productsales"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :productsales, :sale[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mClient Load (0.9ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:20:in `block in create'
  [1m[36mSeller Load (0.5ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:20:in `block in create'
  [1m[36mSale Create (0.5ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-02 12:38:52.792828', '2021-11-02 12:38:52.792828')[0m
  â†³ app/controllers/sale_controller.rb:20:in `block in create'
  [1m[36mSale Load (0.7ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 38 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:33:in `block (2 levels) in create'
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:33:in `block (2 levels) in create'
  [1m[36mProductsale Create (3.3ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (38, 1, 10.0, 2, '2021-11-02 12:38:52.845297', '2021-11-02 12:38:52.845297')[0m
  â†³ app/controllers/sale_controller.rb:33:in `block (2 levels) in create'
  [1m[36mSale Load (0.8ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 38 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:33:in `block (2 levels) in create'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:33:in `block (2 levels) in create'
  [1m[36mProductsale Create (0.6ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (38, 2, 20.0, 2, '2021-11-02 12:38:52.859181', '2021-11-02 12:38:52.859181')[0m
  â†³ app/controllers/sale_controller.rb:33:in `block (2 levels) in create'
  [1m[36mSale Load (0.6ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 38 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:33:in `block (2 levels) in create'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:33:in `block (2 levels) in create'
  [1m[36mProductsale Create (0.6ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (38, 4, 30.0, 2, '2021-11-02 12:38:52.870432', '2021-11-02 12:38:52.870432')[0m
  â†³ app/controllers/sale_controller.rb:33:in `block (2 levels) in create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:18:in `create'
Completed 200 OK in 182ms (Views: 0.7ms | ActiveRecord: 32.5ms | Allocations: 31505)


Started GET "/sale/35/" for ::1 at 2021-11-02 09:41:19 -0300
Processing by SaleController#show as */*
  Parameters: {"id"=>"35"}
  [1m[36mSale Load (1.0ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 35 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:8:in `show'
Completed 200 OK in 28ms (Views: 0.7ms | ActiveRecord: 7.8ms | Allocations: 4636)


Started GET "/sale/35/" for ::1 at 2021-11-02 09:44:47 -0300
Processing by SaleController#show as */*
  Parameters: {"id"=>"35"}
  [1m[36mSale Load (0.4ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 35 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:8:in `show'
  [1m[36mProductsale Load (0.8ms)[0m  [1m[34mSELECT `productsales`.* FROM `productsales` WHERE (sale_id = '35')[0m
  â†³ app/controllers/sale_controller.rb:9:in `show'
  [1m[36mProductsale Load (0.8ms)[0m  [1m[34mSELECT `productsales`.* FROM `productsales` WHERE `productsales`.`sale_id` = 35[0m
  â†³ app/controllers/sale_controller.rb:9:in `show'
Completed 200 OK in 64ms (Views: 1.3ms | ActiveRecord: 13.6ms | Allocations: 10937)


Started GET "/sale/35/" for ::1 at 2021-11-02 09:45:24 -0300
Processing by SaleController#show as */*
  Parameters: {"id"=>"35"}
  [1m[36mSale Load (0.5ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 35 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:8:in `show'
  [1m[36mProductsale Load (0.6ms)[0m  [1m[34mSELECT `productsales`.* FROM `productsales` WHERE (sale_id = '35')[0m
  â†³ app/controllers/sale_controller.rb:9:in `show'
  [1m[36mProductsale Load (0.6ms)[0m  [1m[34mSELECT `productsales`.* FROM `productsales` WHERE `productsales`.`sale_id` = 35[0m
  â†³ app/controllers/sale_controller.rb:9:in `show'
Completed 200 OK in 60ms (Views: 1.3ms | ActiveRecord: 14.3ms | Allocations: 10473)


Started GET "/sale/35/" for ::1 at 2021-11-02 09:45:42 -0300
Processing by SaleController#show as */*
  Parameters: {"id"=>"35"}
  [1m[36mSale Load (0.8ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 35 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:8:in `show'
  [1m[36mProductsale Load (0.8ms)[0m  [1m[34mSELECT `productsales`.* FROM `productsales` WHERE (sale_id = '35')[0m
  â†³ app/controllers/sale_controller.rb:9:in `show'
  [1m[36mProductsale Load (0.8ms)[0m  [1m[34mSELECT `productsales`.* FROM `productsales` WHERE `productsales`.`sale_id` = 35[0m
  â†³ app/controllers/sale_controller.rb:9:in `show'
Completed 200 OK in 65ms (Views: 1.4ms | ActiveRecord: 15.0ms | Allocations: 10200)


Started GET "/sale/35/" for ::1 at 2021-11-02 09:50:43 -0300
Processing by SaleController#show as */*
  Parameters: {"id"=>"35"}
  [1m[36mSale Load (0.4ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 35 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:8:in `show'
Completed 500 Internal Server Error in 52ms (ActiveRecord: 6.9ms | Allocations: 5899)


  
NameError (uninitialized constant SaleController::ComplexPartSerializer):
  
app/controllers/sale_controller.rb:11:in `show'
Started GET "/sale/35/" for ::1 at 2021-11-02 09:51:21 -0300
Processing by SaleController#show as */*
  Parameters: {"id"=>"35"}
  [1m[36mSale Load (1.0ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 35 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:8:in `show'
  [1m[36mProductsale Load (0.5ms)[0m  [1m[34mSELECT `productsales`.* FROM `productsales` WHERE `productsales`.`sale_id` = 35[0m
  â†³ app/controllers/sale_controller.rb:10:in `show'
Completed 200 OK in 70ms (Views: 21.7ms | ActiveRecord: 15.3ms | Allocations: 10025)


Started POST "/sale/" for ::1 at 2021-11-02 09:56:38 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "productsales"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :productsales, :sale[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mClient Load (0.4ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mSeller Load (0.7ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mSale Create (0.6ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-02 12:56:38.915747', '2021-11-02 12:56:38.915747')[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
Completed 200 OK in 113ms (Views: 1.1ms | ActiveRecord: 17.5ms | Allocations: 15784)


Started POST "/sale/" for ::1 at 2021-11-02 09:58:05 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "productsales"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :productsales, :sale[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mSeller Load (0.9ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mSale Create (4.2ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-02 12:58:06.062206', '2021-11-02 12:58:06.062206')[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
Completed 500 Internal Server Error in 107ms (ActiveRecord: 27.9ms | Allocations: 18820)


  
ActiveRecord::Rollback (#<NoMethodError: undefined method `save' for #<ActiveRecord::Associations::CollectionProxy []>>):
  
app/controllers/sale_controller.rb:41:in `rescue in create'
app/controllers/sale_controller.rb:38:in `create'
Started POST "/sale/" for ::1 at 2021-11-02 09:59:44 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "productsales"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :productsales, :sale[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mSeller Load (0.7ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mSale Create (0.9ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-02 12:59:44.491419', '2021-11-02 12:59:44.491419')[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
Completed 500 Internal Server Error in 144ms (ActiveRecord: 33.0ms | Allocations: 20128)


  
ActiveRecord::Rollback (#<ArgumentError: When assigning attributes, you must pass a hash as an argument, Productsale::ActiveRecord_Associations_CollectionProxy passed.>):
  
app/controllers/sale_controller.rb:42:in `rescue in create'
app/controllers/sale_controller.rb:39:in `create'
Started POST "/sale/" for ::1 at 2021-11-02 10:01:03 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "productsales"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :productsales, :sale[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mSeller Load (0.5ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mSale Create (0.6ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-02 13:01:03.248367', '2021-11-02 13:01:03.248367')[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
Completed 500 Internal Server Error in 89ms (ActiveRecord: 22.3ms | Allocations: 19975)


  
ActiveRecord::Rollback (#<ArgumentError: When assigning attributes, you must pass a hash as an argument, Array passed.>):
  
app/controllers/sale_controller.rb:42:in `rescue in create'
app/controllers/sale_controller.rb:39:in `create'
Started POST "/sale/" for ::1 at 2021-11-02 10:02:44 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "productsales"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :productsales, :sale[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mClient Load (0.7ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mSeller Load (0.5ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mSale Create (0.6ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-02 13:02:44.772949', '2021-11-02 13:02:44.772949')[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mSale Load (0.6ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 43 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mProductsale Create (0.7ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (43, 1, 10.0, 2, '2021-11-02 13:02:44.866059', '2021-11-02 13:02:44.866059')[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mSale Load (1.2ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 43 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mProductsale Create (0.5ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (43, 2, 20.0, 2, '2021-11-02 13:02:44.884659', '2021-11-02 13:02:44.884659')[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mSale Load (0.5ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 43 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mProductsale Create (0.6ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (43, 4, 30.0, 2, '2021-11-02 13:02:44.897963', '2021-11-02 13:02:44.897963')[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
Completed 200 OK in 197ms (Views: 0.9ms | ActiveRecord: 32.9ms | Allocations: 30901)


Started POST "/sale/" for ::1 at 2021-11-02 10:03:49 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "productsales"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :productsales, :sale[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
Completed 500 Internal Server Error in 40ms (ActiveRecord: 11.7ms | Allocations: 4916)


  
ActiveRecord::Rollback (#<NoMethodError: undefined method `prodcutsales' for #<Sale:0x00007fb3890810f8>
Did you mean?  productsales
               productsales=>):
  
app/controllers/sale_controller.rb:41:in `rescue in create'
app/controllers/sale_controller.rb:38:in `create'
Started POST "/sale/" for ::1 at 2021-11-02 10:04:54 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "productsales"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :productsales, :sale[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:18:in `block in create'
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:20:in `block in create'
  [1m[36mSeller Load (0.7ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:20:in `block in create'
  [1m[36mSale Create (0.5ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-02 13:04:55.031273', '2021-11-02 13:04:55.031273')[0m
  â†³ app/controllers/sale_controller.rb:20:in `block in create'
  [1m[36mSale Load (0.5ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 44 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:31:in `block (2 levels) in create'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:31:in `block (2 levels) in create'
  [1m[36mProductsale Create (0.6ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (44, 1, 10.0, 2, '2021-11-02 13:04:55.097047', '2021-11-02 13:04:55.097047')[0m
  â†³ app/controllers/sale_controller.rb:31:in `block (2 levels) in create'
  [1m[36mSale Load (2.6ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 44 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:31:in `block (2 levels) in create'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:31:in `block (2 levels) in create'
  [1m[36mProductsale Create (0.5ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (44, 2, 20.0, 2, '2021-11-02 13:04:55.116301', '2021-11-02 13:04:55.116301')[0m
  â†³ app/controllers/sale_controller.rb:31:in `block (2 levels) in create'
  [1m[36mSale Load (0.9ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 44 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:31:in `block (2 levels) in create'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:31:in `block (2 levels) in create'
  [1m[36mProductsale Create (2.0ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (44, 4, 30.0, 2, '2021-11-02 13:04:55.135453', '2021-11-02 13:04:55.135453')[0m
  â†³ app/controllers/sale_controller.rb:31:in `block (2 levels) in create'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
Completed 200 OK in 214ms (Views: 1.2ms | ActiveRecord: 44.1ms | Allocations: 30909)


Started GET "/sale/35/" for ::1 at 2021-11-02 10:08:06 -0300
Processing by SaleController#show as */*
  Parameters: {"id"=>"35"}
  [1m[36mSale Load (1.1ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 35 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:8:in `show'
  [1m[36mProductsale Load (0.9ms)[0m  [1m[34mSELECT `productsales`.* FROM `productsales` WHERE `productsales`.`sale_id` = 35[0m
  â†³ app/controllers/sale_controller.rb:9:in `show'
Completed 200 OK in 109ms (Views: 61.4ms | ActiveRecord: 17.1ms | Allocations: 10067)


Started GET "/sale/" for ::1 at 2021-11-02 10:09:06 -0300
Processing by SaleController#index as */*
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.0ms | Allocations: 2891)


  
NameError (undefined local variable or method `sale' for #<SaleController:0x007fb386a6c610>
Did you mean?  sales):
  
app/controllers/sale_controller.rb:4:in `index'
Started GET "/sale/" for ::1 at 2021-11-02 10:09:17 -0300
Processing by SaleController#index as */*
  [1m[36mSale Load (0.6ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` /* loading for inspect */ ORDER BY created_at DESC LIMIT 11[0m
Completed 500 Internal Server Error in 40ms (ActiveRecord: 0.0ms | Allocations: 6272)


  [1m[36mCACHE Sale Load (0.0ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` /* loading for inspect */ ORDER BY created_at DESC LIMIT 11[0m
  
NoMethodError (undefined method `productsales' for #<Sale::ActiveRecord_Relation:0x00007fb380edd100>):
  
app/controllers/sale_controller.rb:4:in `index'
  [1m[36mCACHE Sale Load (0.0ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` /* loading for inspect */ ORDER BY created_at DESC LIMIT 11[0m
Started GET "/sale/" for ::1 at 2021-11-02 10:09:41 -0300
Processing by SaleController#index as */*
  [1m[36mSale Load (2.2ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` ORDER BY created_at DESC[0m
  â†³ app/controllers/sale_controller.rb:4:in `index'
Completed 200 OK in 33ms (Views: 14.7ms | ActiveRecord: 8.3ms | Allocations: 5029)


Started GET "/sale/35/" for ::1 at 2021-11-02 10:09:48 -0300
Processing by SaleController#show as */*
  Parameters: {"id"=>"35"}
  [1m[36mSale Load (0.8ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 35 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:8:in `show'
  [1m[36mProductsale Load (0.7ms)[0m  [1m[34mSELECT `productsales`.* FROM `productsales` WHERE `productsales`.`sale_id` = 35[0m
  â†³ app/controllers/sale_controller.rb:9:in `show'
Completed 200 OK in 40ms (Views: 23.8ms | ActiveRecord: 8.6ms | Allocations: 6227)


Started GET "/sale/35/" for ::1 at 2021-11-02 10:12:55 -0300
  
SyntaxError (/Users/rodrigocastro/Meu Drive/16 - Programacao/Rails-Ruby/SalesSystem/app/controllers/sale_controller.rb:9: syntax error, unexpected ':', expecting end
        objjson = json: {sale: sale, productsale: sa...
                      ^):
  
app/controllers/sale_controller.rb:9: syntax error, unexpected ':', expecting end
app/controllers/sale_controller.rb:9: syntax error, unexpected ':', expecting end
Started GET "/sale/35/" for ::1 at 2021-11-02 10:13:36 -0300
  
SyntaxError (/Users/rodrigocastro/Meu Drive/16 - Programacao/Rails-Ruby/SalesSystem/app/controllers/sale_controller.rb:9: syntax error, unexpected ':', expecting end
        objjson = json: {sale: sale, productsale: sa...
                      ^
/Users/rodrigocastro/Meu Drive/16 - Programacao/Rails-Ruby/SalesSystem/app/controllers/sale_controller.rb:9: syntax error, unexpected ',', expecting end
...roductsale: sale.productsales},status: :ok
...                              ^):
  
app/controllers/sale_controller.rb:9: syntax error, unexpected ':', expecting end
app/controllers/sale_controller.rb:9: syntax error, unexpected ',', expecting end
app/controllers/sale_controller.rb:9: syntax error, unexpected ':', expecting end
app/controllers/sale_controller.rb:9: syntax error, unexpected ',', expecting end
Started GET "/sale/35/" for ::1 at 2021-11-02 10:16:30 -0300
Processing by SaleController#show as */*
  Parameters: {"id"=>"35"}
  [1m[36mSale Load (0.5ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 35 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:8:in `show'
  [1m[36mProductsale Load (1.0ms)[0m  [1m[34mSELECT `productsales`.* FROM `productsales` WHERE `productsales`.`sale_id` = 35[0m
  â†³ app/controllers/sale_controller.rb:11:in `show'
Completed 200 OK in 63ms (Views: 19.0ms | ActiveRecord: 17.4ms | Allocations: 10151)


Started GET "/sale/" for ::1 at 2021-11-02 10:18:43 -0300
Processing by SaleController#index as */*
  [1m[36mSale Load (0.5ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` ORDER BY created_at DESC[0m
  â†³ app/controllers/sale_controller.rb:4:in `index'
Completed 200 OK in 45ms (Views: 31.6ms | ActiveRecord: 6.5ms | Allocations: 4983)


Started GET "/sale/35/" for ::1 at 2021-11-02 10:18:48 -0300
Processing by SaleController#show as */*
  Parameters: {"id"=>"35"}
  [1m[36mSale Load (0.7ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 35 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:8:in `show'
  [1m[36mProductsale Load (0.8ms)[0m  [1m[34mSELECT `productsales`.* FROM `productsales` WHERE `productsales`.`sale_id` = 35[0m
  â†³ app/controllers/sale_controller.rb:9:in `show'
Completed 200 OK in 39ms (Views: 21.1ms | ActiveRecord: 9.4ms | Allocations: 6250)


Started POST "/sale/" for ::1 at 2021-11-02 10:18:54 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "productsales"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :productsales, :sale[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mSeller Load (1.3ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mSale Create (1.0ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-02 13:18:54.382146', '2021-11-02 13:18:54.382146')[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mSale Load (0.6ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 45 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mProduct Load (3.1ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mProductsale Create (0.6ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (45, 1, 10.0, 2, '2021-11-02 13:18:54.475758', '2021-11-02 13:18:54.475758')[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mSale Load (0.6ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 45 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mProductsale Create (0.6ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (45, 2, 20.0, 2, '2021-11-02 13:18:54.491702', '2021-11-02 13:18:54.491702')[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mSale Load (1.9ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 45 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mProductsale Create (1.0ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (45, 4, 30.0, 2, '2021-11-02 13:18:54.512307', '2021-11-02 13:18:54.512307')[0m
  â†³ app/controllers/sale_controller.rb:30:in `block (2 levels) in create'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mProductsale Load (0.6ms)[0m  [1m[34mSELECT `productsales`.* FROM `productsales` WHERE `productsales`.`sale_id` = 45[0m
  â†³ app/controllers/sale_controller.rb:46:in `create'
Completed 200 OK in 272ms (Views: 5.8ms | ActiveRecord: 30.9ms | Allocations: 25675)


Started GET "/sale/" for ::1 at 2021-11-02 10:36:29 -0300
Processing by SaleController#index as */*
  [1m[36mSale Load (1.0ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` ORDER BY created_at DESC[0m
  â†³ app/controllers/sale_controller.rb:4:in `index'
Completed 200 OK in 30ms (Views: 17.8ms | ActiveRecord: 1.4ms | Allocations: 5393)


Started GET "/sale/35/" for ::1 at 2021-11-02 10:36:35 -0300
Processing by SaleController#show as */*
  Parameters: {"id"=>"35"}
  [1m[36mSale Load (2.2ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 35 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:8:in `show'
  [1m[36mProductsale Load (1.7ms)[0m  [1m[34mSELECT `productsales`.* FROM `productsales` WHERE `productsales`.`sale_id` = 35[0m
  â†³ app/controllers/sale_controller.rb:9:in `show'
Completed 200 OK in 34ms (Views: 21.6ms | ActiveRecord: 3.9ms | Allocations: 5978)


Started POST "/sale/" for ::1 at 2021-11-02 10:36:47 -0300
Processing by SaleController#create as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "productsales"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
[31mUnpermitted parameters: :productsales, :sale[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mClient Load (1.4ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mSeller Load (0.8ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mSale Create (0.7ms)[0m  [1m[32mINSERT INTO `sales` (`client_id`, `seller_id`, `created_at`, `updated_at`) VALUES (1, 1, '2021-11-02 13:36:48.053610', '2021-11-02 13:36:48.053610')[0m
  â†³ app/controllers/sale_controller.rb:19:in `block in create'
  [1m[36mSale Load (0.7ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:50:in `block in addProductSales'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:50:in `block in addProductSales'
  [1m[36mProductsale Create (0.7ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (46, 1, 10.0, 2, '2021-11-02 13:36:48.108925', '2021-11-02 13:36:48.108925')[0m
  â†³ app/controllers/sale_controller.rb:50:in `block in addProductSales'
  [1m[36mSale Load (0.8ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:50:in `block in addProductSales'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:50:in `block in addProductSales'
  [1m[36mProductsale Create (0.6ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (46, 2, 20.0, 2, '2021-11-02 13:36:48.128975', '2021-11-02 13:36:48.128975')[0m
  â†³ app/controllers/sale_controller.rb:50:in `block in addProductSales'
  [1m[36mSale Load (0.8ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:50:in `block in addProductSales'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:50:in `block in addProductSales'
  [1m[36mProductsale Create (0.6ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (46, 4, 30.0, 2, '2021-11-02 13:36:48.147038', '2021-11-02 13:36:48.147038')[0m
  â†³ app/controllers/sale_controller.rb:50:in `block in addProductSales'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:17:in `create'
  [1m[36mProductsale Load (0.6ms)[0m  [1m[34mSELECT `productsales`.* FROM `productsales` WHERE `productsales`.`sale_id` = 46[0m
  â†³ app/controllers/sale_controller.rb:34:in `create'
Completed 200 OK in 194ms (Views: 3.6ms | ActiveRecord: 10.9ms | Allocations: 24662)


Started PUT "/sale/46/" for ::1 at 2021-11-02 10:40:36 -0300
Processing by SaleController#update as */*
  Parameters: {"client_id"=>"2", "seller_id"=>"2", "productsales"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "id"=>"46", "sale"=>{"client_id"=>"2", "seller_id"=>"2"}}
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:63:in `block in update'
  [1m[36mSale Load (1.1ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:63:in `block in update'
[31mUnpermitted parameters: :productsales, :id, :sale[0m
  [1m[36mClient Load (1.3ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:64:in `block in update'
  [1m[36mSeller Load (1.0ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:64:in `block in update'
  [1m[36mSale Update (0.9ms)[0m  [1m[33mUPDATE `sales` SET `sales`.`client_id` = 2, `sales`.`seller_id` = 2, `sales`.`updated_at` = '2021-11-02 13:40:36.177838' WHERE `sales`.`id` = 46[0m
  â†³ app/controllers/sale_controller.rb:64:in `block in update'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:61:in `update'
Completed 500 Internal Server Error in 26ms (ActiveRecord: 6.5ms | Allocations: 3924)


  
ActiveRecord::Rollback (#<ArgumentError: wrong number of arguments (given 1, expected 0)>):
  
app/controllers/sale_controller.rb:73:in `rescue in update'
app/controllers/sale_controller.rb:70:in `update'
Started PUT "/sale/46/" for ::1 at 2021-11-02 10:42:30 -0300
Processing by SaleController#update as */*
  Parameters: {"client_id"=>"2", "seller_id"=>"2", "productsales"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "id"=>"46", "sale"=>{"client_id"=>"2", "seller_id"=>"2"}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:64:in `block in update'
  [1m[36mSale Load (0.9ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:64:in `block in update'
[31mUnpermitted parameters: :productsales, :id, :sale[0m
  [1m[36mClient Load (0.7ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:65:in `block in update'
  [1m[36mSeller Load (1.0ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:65:in `block in update'
  [1m[36mSale Update (0.7ms)[0m  [1m[33mUPDATE `sales` SET `sales`.`client_id` = 2, `sales`.`seller_id` = 2, `sales`.`updated_at` = '2021-11-02 13:42:30.754532' WHERE `sales`.`id` = 46[0m
  â†³ app/controllers/sale_controller.rb:65:in `block in update'
  [1m[36mTRANSACTION (5.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:62:in `update'
Completed 500 Internal Server Error in 162ms (ActiveRecord: 32.5ms | Allocations: 17156)


  
ActiveRecord::Rollback (#<ArgumentError: wrong number of arguments (given 1, expected 0)>):
  
app/controllers/sale_controller.rb:74:in `rescue in update'
app/controllers/sale_controller.rb:71:in `update'
Started PUT "/sale/46/" for ::1 at 2021-11-02 10:43:54 -0300
Processing by SaleController#update as */*
  Parameters: {"client_id"=>"2", "seller_id"=>"2", "productsales"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "id"=>"46", "sale"=>{"client_id"=>"2", "seller_id"=>"2"}}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:66:in `block in update'
  [1m[36mSale Load (0.8ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:66:in `block in update'
[31mUnpermitted parameters: :productsales, :id, :sale[0m
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:68:in `block in update'
  [1m[36mSeller Load (0.6ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:68:in `block in update'
  [1m[36mSale Update (0.7ms)[0m  [1m[33mUPDATE `sales` SET `sales`.`client_id` = 2, `sales`.`seller_id` = 2, `sales`.`updated_at` = '2021-11-02 13:43:54.236157' WHERE `sales`.`id` = 46[0m
  â†³ app/controllers/sale_controller.rb:68:in `block in update'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:64:in `update'
Completed 500 Internal Server Error in 97ms (ActiveRecord: 23.4ms | Allocations: 17160)


  
ActiveRecord::Rollback (#<ArgumentError: wrong number of arguments (given 1, expected 0)>):
  
app/controllers/sale_controller.rb:77:in `rescue in update'
app/controllers/sale_controller.rb:74:in `update'
Started PUT "/sale/46/" for ::1 at 2021-11-02 10:47:24 -0300
Processing by SaleController#update as */*
  Parameters: {"client_id"=>"2", "seller_id"=>"2", "productsales"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "id"=>"46", "sale"=>{"client_id"=>"2", "seller_id"=>"2"}}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:66:in `block in update'
  [1m[36mSale Load (1.5ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:66:in `block in update'
[31mUnpermitted parameters: :productsales, :sale[0m
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:68:in `block in update'
  [1m[36mSeller Load (0.6ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:68:in `block in update'
  [1m[36mSale Update (1.2ms)[0m  [1m[33mUPDATE `sales` SET `sales`.`client_id` = 2, `sales`.`seller_id` = 2, `sales`.`updated_at` = '2021-11-02 13:47:24.886431' WHERE `sales`.`id` = 46[0m
  â†³ app/controllers/sale_controller.rb:68:in `block in update'
  [1m[36mTRANSACTION (4.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:64:in `update'
Completed 500 Internal Server Error in 170ms (ActiveRecord: 26.6ms | Allocations: 17127)


  
ActiveRecord::Rollback (#<ArgumentError: wrong number of arguments (given 1, expected 0)>):
  
app/controllers/sale_controller.rb:77:in `rescue in update'
app/controllers/sale_controller.rb:74:in `update'
Started PUT "/sale/46/" for ::1 at 2021-11-02 10:49:41 -0300
Processing by SaleController#update as */*
  Parameters: {"client_id"=>"2", "seller_id"=>"2", "productsales"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "id"=>"46", "sale"=>{"client_id"=>"2", "seller_id"=>"2"}}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:66:in `block in update'
  [1m[36mSale Load (0.6ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:66:in `block in update'
[31mUnpermitted parameters: :productsales, :sale[0m
  [1m[36mClient Load (0.7ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:68:in `block in update'
  [1m[36mSeller Load (0.5ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:68:in `block in update'
  [1m[36mSale Update (0.9ms)[0m  [1m[33mUPDATE `sales` SET `sales`.`client_id` = 2, `sales`.`seller_id` = 2, `sales`.`updated_at` = '2021-11-02 13:49:41.937796' WHERE `sales`.`id` = 46[0m
  â†³ app/controllers/sale_controller.rb:68:in `block in update'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:64:in `update'
Completed 500 Internal Server Error in 119ms (ActiveRecord: 21.6ms | Allocations: 17172)


  
ActiveRecord::Rollback (#<ArgumentError: wrong number of arguments (given 1, expected 0)>):
  
app/controllers/sale_controller.rb:77:in `rescue in update'
app/controllers/sale_controller.rb:74:in `update'
Started PUT "/sale/46/" for ::1 at 2021-11-02 10:52:09 -0300
Processing by SaleController#update as */*
  Parameters: {"client_id"=>"2", "seller_id"=>"2", "productsales"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "id"=>"46", "sale"=>{"client_id"=>"2", "seller_id"=>"2"}}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:66:in `block in update'
  [1m[36mSale Load (1.0ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:66:in `block in update'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:64:in `update'
Completed 500 Internal Server Error in 24ms (ActiveRecord: 9.6ms | Allocations: 3835)


  
ActiveRecord::Rollback (#<ArgumentError: When assigning attributes, you must pass a hash as an argument, Array passed.>):
  
app/controllers/sale_controller.rb:77:in `rescue in update'
app/controllers/sale_controller.rb:74:in `update'
Started PUT "/sale/46/" for ::1 at 2021-11-02 10:54:22 -0300
Processing by SaleController#update as */*
  Parameters: {"client_id"=>"2", "seller_id"=>"2", "productsales"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "id"=>"46", "sale"=>{"client_id"=>"2", "seller_id"=>"2"}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:66:in `block in update'
  [1m[36mSale Load (1.0ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:66:in `block in update'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:64:in `update'
Completed 500 Internal Server Error in 18ms (ActiveRecord: 8.6ms | Allocations: 3845)


  
ActiveRecord::Rollback (#<ActiveModel::UnknownAttributeError: unknown attribute 'sale_id' for Sale.>):
  
app/controllers/sale_controller.rb:82:in `rescue in update'
app/controllers/sale_controller.rb:79:in `update'
Started PUT "/sale/46/" for ::1 at 2021-11-02 10:54:55 -0300
Processing by SaleController#update as */*
  Parameters: {"client_id"=>"2", "seller_id"=>"2", "productsales"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "id"=>"46", "sale"=>{"client_id"=>"2", "seller_id"=>"2"}}
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:66:in `block in update'
  [1m[36mSale Load (0.6ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:66:in `block in update'
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:73:in `block in update'
  [1m[36mSeller Load (0.5ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:73:in `block in update'
  [1m[36mSale Update (0.8ms)[0m  [1m[33mUPDATE `sales` SET `sales`.`client_id` = 2, `sales`.`seller_id` = 2, `sales`.`updated_at` = '2021-11-02 13:54:55.525513' WHERE `sales`.`id` = 46[0m
  â†³ app/controllers/sale_controller.rb:73:in `block in update'
  [1m[36mTRANSACTION (4.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:64:in `update'
Completed 500 Internal Server Error in 117ms (ActiveRecord: 23.5ms | Allocations: 17058)


  
ActiveRecord::Rollback (#<ArgumentError: wrong number of arguments (given 1, expected 0)>):
  
app/controllers/sale_controller.rb:82:in `rescue in update'
app/controllers/sale_controller.rb:79:in `update'
Started PUT "/sale/46/" for ::1 at 2021-11-02 10:56:45 -0300
Processing by SaleController#update as */*
  Parameters: {"client_id"=>"2", "seller_id"=>"2", "productsales"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "id"=>"46", "sale"=>{"client_id"=>"2", "seller_id"=>"2"}}
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:66:in `block in update'
  [1m[36mSale Load (0.6ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:66:in `block in update'
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:75:in `block in update'
  [1m[36mSeller Load (0.5ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:75:in `block in update'
  [1m[36mSale Update (0.7ms)[0m  [1m[33mUPDATE `sales` SET `sales`.`client_id` = 2, `sales`.`seller_id` = 2, `sales`.`updated_at` = '2021-11-02 13:56:46.091883' WHERE `sales`.`id` = 46[0m
  â†³ app/controllers/sale_controller.rb:75:in `block in update'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:64:in `update'
Completed 500 Internal Server Error in 119ms (ActiveRecord: 20.9ms | Allocations: 17094)


  
ActiveRecord::Rollback (#<ArgumentError: wrong number of arguments (given 1, expected 0)>):
  
app/controllers/sale_controller.rb:84:in `rescue in update'
app/controllers/sale_controller.rb:81:in `update'
Started PUT "/sale/46/" for ::1 at 2021-11-02 10:57:43 -0300
Processing by SaleController#update as */*
  Parameters: {"client_id"=>"2", "seller_id"=>"2", "productsales"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "id"=>"46", "sale"=>{"client_id"=>"2", "seller_id"=>"2"}}
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:66:in `block in update'
  [1m[36mSale Load (0.6ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:66:in `block in update'
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:75:in `block in update'
  [1m[36mSeller Load (0.5ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:75:in `block in update'
  [1m[36mSale Update (1.0ms)[0m  [1m[33mUPDATE `sales` SET `sales`.`client_id` = 2, `sales`.`seller_id` = 2, `sales`.`updated_at` = '2021-11-02 13:57:43.342516' WHERE `sales`.`id` = 46[0m
  â†³ app/controllers/sale_controller.rb:75:in `block in update'
  [1m[36mTRANSACTION (4.0ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:64:in `update'
Completed 500 Internal Server Error in 83ms (ActiveRecord: 22.5ms | Allocations: 17094)


  
ActiveRecord::Rollback (#<ArgumentError: wrong number of arguments (given 1, expected 0)>):
  
app/controllers/sale_controller.rb:87:in `rescue in update'
app/controllers/sale_controller.rb:84:in `update'
Started PUT "/sale/46/" for ::1 at 2021-11-02 11:00:55 -0300
Processing by SaleController#update as */*
  Parameters: {"client_id"=>"2", "seller_id"=>"2", "productsales"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "id"=>"46", "sale"=>{"client_id"=>"2", "seller_id"=>"2"}}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:66:in `block in update'
  [1m[36mSale Load (0.5ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:66:in `block in update'
  [1m[36mClient Load (1.0ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:75:in `block in update'
  [1m[36mSeller Load (0.4ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:75:in `block in update'
  [1m[36mSale Update (0.9ms)[0m  [1m[33mUPDATE `sales` SET `sales`.`client_id` = 2, `sales`.`seller_id` = 2, `sales`.`updated_at` = '2021-11-02 14:00:55.383902' WHERE `sales`.`id` = 46[0m
  â†³ app/controllers/sale_controller.rb:75:in `block in update'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:64:in `update'
Completed 500 Internal Server Error in 147ms (ActiveRecord: 19.1ms | Allocations: 17089)


  
ActiveRecord::Rollback (#<ArgumentError: wrong number of arguments (given 1, expected 0)>):
  
app/controllers/sale_controller.rb:87:in `rescue in update'
app/controllers/sale_controller.rb:84:in `update'
Started PUT "/sale/46/" for ::1 at 2021-11-02 11:02:25 -0300
Processing by SaleController#update as */*
  Parameters: {"client_id"=>"2", "seller_id"=>"2", "productsales"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "id"=>"46", "sale"=>{"client_id"=>"2", "seller_id"=>"2"}}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:67:in `block in update'
  [1m[36mSale Load (0.4ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:67:in `block in update'
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:76:in `block in update'
  [1m[36mSeller Load (0.7ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:76:in `block in update'
  [1m[36mSale Update (0.8ms)[0m  [1m[33mUPDATE `sales` SET `sales`.`client_id` = 2, `sales`.`seller_id` = 2, `sales`.`updated_at` = '2021-11-02 14:02:25.493561' WHERE `sales`.`id` = 46[0m
  â†³ app/controllers/sale_controller.rb:76:in `block in update'
  [1m[36mTRANSACTION (4.6ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/sale_controller.rb:65:in `update'
Completed 500 Internal Server Error in 137ms (ActiveRecord: 24.6ms | Allocations: 17050)


  
ActiveRecord::Rollback (#<ArgumentError: wrong number of arguments (given 1, expected 0)>):
  
app/controllers/sale_controller.rb:88:in `rescue in update'
app/controllers/sale_controller.rb:85:in `update'
Started PUT "/sale/46/" for ::1 at 2021-11-02 11:03:51 -0300
Processing by SaleController#update as */*
  Parameters: {"client_id"=>"2", "seller_id"=>"2", "productsales"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "id"=>"46", "sale"=>{"client_id"=>"2", "seller_id"=>"2"}}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:67:in `block in update'
  [1m[36mSale Load (0.6ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:67:in `block in update'
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:76:in `block in update'
  [1m[36mSeller Load (0.6ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:76:in `block in update'
  [1m[36mSale Update (1.3ms)[0m  [1m[33mUPDATE `sales` SET `sales`.`client_id` = 2, `sales`.`seller_id` = 2, `sales`.`updated_at` = '2021-11-02 14:03:52.354374' WHERE `sales`.`id` = 46[0m
  â†³ app/controllers/sale_controller.rb:76:in `block in update'
  [1m[36mProductsale Destroy (2.7ms)[0m  [1m[31mDELETE FROM `productsales` WHERE `productsales`.`sale_id` = 46[0m
  â†³ app/controllers/sale_controller.rb:79:in `block in update'
  [1m[36mSale Load (0.5ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mProductsale Create (0.6ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (46, 1, 10.0, 2, '2021-11-02 14:03:52.431417', '2021-11-02 14:03:52.431417')[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mSale Load (0.6ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mProductsale Create (0.6ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (46, 2, 20.0, 2, '2021-11-02 14:03:52.446529', '2021-11-02 14:03:52.446529')[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mSale Load (0.5ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mProductsale Create (0.6ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (46, 4, 30.0, 2, '2021-11-02 14:03:52.462007', '2021-11-02 14:03:52.462007')[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:65:in `update'
Completed 500 Internal Server Error in 317ms (ActiveRecord: 36.2ms | Allocations: 33542)


  
NameError (undefined local variable or method `sale' for #<SaleController:0x007fb386b33080>
Did you mean?  stale?):
  
app/controllers/sale_controller.rb:95:in `update'
Started PUT "/sale/46/" for ::1 at 2021-11-02 11:06:34 -0300
Processing by SaleController#update as */*
  Parameters: {"client_id"=>"2", "seller_id"=>"2", "productsales"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "id"=>"46", "sale"=>{"client_id"=>"2", "seller_id"=>"2"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:68:in `block in update'
  [1m[36mSale Load (0.4ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:68:in `block in update'
  [1m[36mClient Load (1.0ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:77:in `block in update'
  [1m[36mSeller Load (0.6ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:77:in `block in update'
  [1m[36mProductsale Destroy (0.5ms)[0m  [1m[31mDELETE FROM `productsales` WHERE `productsales`.`sale_id` = 46[0m
  â†³ app/controllers/sale_controller.rb:80:in `block in update'
  [1m[36mSale Load (0.5ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mProductsale Create (0.6ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (46, 1, 10.0, 2, '2021-11-02 14:06:34.743744', '2021-11-02 14:06:34.743744')[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mSale Load (0.6ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mProductsale Create (0.6ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (46, 2, 20.0, 2, '2021-11-02 14:06:34.759717', '2021-11-02 14:06:34.759717')[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mSale Load (0.6ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mProductsale Create (0.7ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (46, 4, 30.0, 2, '2021-11-02 14:06:34.774644', '2021-11-02 14:06:34.774644')[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:66:in `update'
  [1m[36mProductsale Load (0.7ms)[0m  [1m[34mSELECT `productsales`.* FROM `productsales` WHERE `productsales`.`sale_id` = 46[0m
  â†³ app/controllers/sale_controller.rb:96:in `update'
Completed 200 OK in 232ms (Views: 11.0ms | ActiveRecord: 36.9ms | Allocations: 32593)


Started PUT "/sale/46/" for ::1 at 2021-11-02 11:07:05 -0300
Processing by SaleController#update as */*
  Parameters: {"client_id"=>"1", "seller_id"=>"1", "productsales"=>[{"product_id"=>"1", "value"=>"10", "quantity"=>"2"}, {"product_id"=>"2", "value"=>"20", "quantity"=>"2"}, {"product_id"=>"4", "value"=>"30", "quantity"=>"2"}], "id"=>"46", "sale"=>{"client_id"=>"1", "seller_id"=>"1"}}
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:68:in `block in update'
  [1m[36mSale Load (0.6ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:68:in `block in update'
  [1m[36mClient Load (0.4ms)[0m  [1m[34mSELECT `clients`.* FROM `clients` WHERE `clients`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:77:in `block in update'
  [1m[36mSeller Load (0.5ms)[0m  [1m[34mSELECT `sellers`.* FROM `sellers` WHERE `sellers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:77:in `block in update'
  [1m[36mSale Update (0.7ms)[0m  [1m[33mUPDATE `sales` SET `sales`.`client_id` = 1, `sales`.`seller_id` = 1, `sales`.`updated_at` = '2021-11-02 14:07:05.587861' WHERE `sales`.`id` = 46[0m
  â†³ app/controllers/sale_controller.rb:77:in `block in update'
  [1m[36mProductsale Destroy (1.0ms)[0m  [1m[31mDELETE FROM `productsales` WHERE `productsales`.`sale_id` = 46[0m
  â†³ app/controllers/sale_controller.rb:57:in `delProductSales'
  [1m[36mSale Load (0.6ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mProductsale Create (0.6ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (46, 1, 10.0, 2, '2021-11-02 14:07:05.641629', '2021-11-02 14:07:05.641629')[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mSale Load (0.5ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mProductsale Create (1.4ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (46, 2, 20.0, 2, '2021-11-02 14:07:05.651428', '2021-11-02 14:07:05.651428')[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mSale Load (0.7ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mProductsale Create (0.8ms)[0m  [1m[32mINSERT INTO `productsales` (`sale_id`, `product_id`, `value`, `quantity`, `created_at`, `updated_at`) VALUES (46, 4, 30.0, 2, '2021-11-02 14:07:05.664029', '2021-11-02 14:07:05.664029')[0m
  â†³ app/controllers/sale_controller.rb:51:in `block in addProductSales'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:66:in `update'
  [1m[36mProductsale Load (1.2ms)[0m  [1m[34mSELECT `productsales`.* FROM `productsales` WHERE `productsales`.`sale_id` = 46[0m
  â†³ app/controllers/sale_controller.rb:96:in `update'
Completed 200 OK in 160ms (Views: 5.7ms | ActiveRecord: 34.7ms | Allocations: 33255)


Started DELETE "/sale/46/" for ::1 at 2021-11-02 11:08:17 -0300
Processing by SaleController#destroy as */*
  Parameters: {"id"=>"46"}
  [1m[36mProductsale Destroy (1.4ms)[0m  [1m[31mDELETE FROM `productsales` WHERE `productsales`.`sale_id` = 46[0m
  â†³ app/controllers/sale_controller.rb:57:in `delProductSales'
  [1m[36mSale Load (0.5ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:97:in `destroy'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sale_controller.rb:98:in `destroy'
  [1m[36mSale Destroy (0.9ms)[0m  [1m[31mDELETE FROM `sales` WHERE `sales`.`id` = 46[0m
  â†³ app/controllers/sale_controller.rb:98:in `destroy'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sale_controller.rb:98:in `destroy'
Completed 200 OK in 41ms (Views: 0.8ms | ActiveRecord: 12.1ms | Allocations: 7636)


Started DELETE "/sale/46/" for ::1 at 2021-11-02 11:08:23 -0300
Processing by SaleController#destroy as */*
  Parameters: {"id"=>"46"}
  [1m[36mProductsale Destroy (0.7ms)[0m  [1m[31mDELETE FROM `productsales` WHERE `productsales`.`sale_id` = 46[0m
  â†³ app/controllers/sale_controller.rb:57:in `delProductSales'
  [1m[36mSale Load (1.0ms)[0m  [1m[34mSELECT `sales`.* FROM `sales` WHERE `sales`.`id` = 46 LIMIT 1[0m
  â†³ app/controllers/sale_controller.rb:97:in `destroy'
Completed 404 Not Found in 7ms (ActiveRecord: 1.7ms | Allocations: 959)


  
ActiveRecord::RecordNotFound (Couldn't find Sale with 'id'=46):
  
app/controllers/sale_controller.rb:97:in `destroy'
